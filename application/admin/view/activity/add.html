{extend name="public/base"/}
{block name="style"}
<link rel="stylesheet" href="__PUBLIC__/plugs/tagsinput/bootstrap-tagsinput.css">
<script src="__PUBLIC__/plugs/tagsinput/bootstrap-tagsinput.js"></script>

<link rel="stylesheet" type="text/css" href="__PUBLIC__/plugs/webuploader/webuploader.css">
<!-- 配置文件 -->
<script type="text/javascript" src="__PUBLIC__/plugs/ueditor/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="__PUBLIC__/plugs/ueditor/ueditor.all.min.js"></script>
<!-- datepicker statr -->
<link href="__PUBLIC__/plugs/datepicker/css/foundation-datepicker.min.css" rel="stylesheet" type="text/css">
<script src="__PUBLIC__/plugs/datepicker/js/foundation-datepicker.js"></script>
<script src="__PUBLIC__/plugs/datepicker/js/foundation-datepicker.zh-CN.js"></script>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/plugs/board/board.min.css">
<!-- datepicker end -->
{/block}
{block name="body"}
<div class="main-box clearfix">
    <header class="main-box-header clearfix">
        <div class="pull-left">
            <h2>{:isset($info['id'])?'编辑':'新增'}活动信息</h2>
        </div>
        <div class="pull-right"></div>
    </header>
    <div class="main-box-body clearfix">
        <form method="post" class="form form-horizontal" onsubmit="return check()">

            <div class="form-group">
                <label class="col-lg-2 control-label">活动图标</label>
                <div class="col-lg-10 col-sm-10">
                    <div class="picker-box">
                        <div id="picker_cover_id" class="picker_button webuploader-container">
                            上传图片
                            <div id="rt_rt_1cqq4q92f1m6d1m8g1c7t12hqbus1" style="position: absolute; top: 0px; left: 0px; width: 88px; height: 32px; overflow: hidden; bottom: auto; right: auto;">
                                <input type="file" name="file" class="webuploader-element-invisible" multiple="multiple">
                                <label style="opacity: 0; width: 100%; height: 100%; display: block; cursor: pointer; background: rgb(255, 255, 255);"></label>
                            </div>
                        </div>
                        <input type="hidden" name="icon" id="field_cover_id" value="">
                        <div id="fileList_cover_id" class="upload-file-list-info" style="width:280px;">
                        </div>
                    </div>
                    <script type="text/javascript">
                        uploadsize =  5;
                        $(function(){
                            $("#picker_cover_id").SentUploader({
                                    fileNumLimit:1,
                                    uploadEvents: {
                                        uploadComplete:function(file){}
                                    },
                                    listName : 'fileList_cover_id',
                                    hiddenName: 'field_cover_id',
                                    hiddenValType:1,
                                    fileSingleSizeLimit:uploadsize*1024*1024,
                                    closeX:true
                                },
                                {
                                    fileType: 'service',
                                    filename : 'images',
                                });
                        });
                    </script>					<div class="help-block"></div>
                </div>
            </div>


            <div class="form-group">
                <label class="col-lg-2 control-label">活动类型</label>
                <div class="col-lg-10 col-sm-10">
                    <select class="form-control" name="type" id="type" style="width:auto;">
                        <option value="1" selected="">报名送</option>
                        <option value="2">团报送</option>
                        <option value="3">报名加钱送物</option>
                    </select>
                    <div class="help-block"></div>
                </div>
            </div>

            <div class="form-group" id="sign_s">
                <label class="col-lg-2 control-label">送啥</label>
                <div class="col-lg-10">
                    <input type="radio" name="what" value="1" checked/> 钱
                    <input type="radio" name="what" value="2"/> 物
                </div>
            </div>

            <div id="tuan_s" style="display: none;">
                <div class="form-group">
                    <label class="col-lg-2 control-label">两人团优惠金额</label>
                    <div class="col-lg-10">
                        <input type="text" class="form-control" name="two_amount" id="two_amount" value="" style="width: 80%">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">三人团优惠金额</label>
                    <div class="col-lg-10">
                        <input type="text" class="form-control" name="three_amount" id="three_amount" value="" style="width: 80%">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-2 control-label">五人团优惠金额</label>
                    <div class="col-lg-10">
                        <input type="text" class="form-control" name="five_amount" id="five_amount" value="" style="width: 80%">
                    </div>
                </div>
            </div>


            <div class="form-group" id="jine">
                <label class="col-lg-2 control-label">金额</label>
                <div class="col-lg-10">
                    <input type="text" class="form-control" name="amount" id="amount" value="" style="width: 80%">

                </div>
            </div>

            <div class="form-group" id="wupin" style="display: none">
                <label class="col-lg-2 control-label">物品名称</label>
                <div class="col-lg-10">
                <input type="text" class="form-control" name="gift" id="gift" value="" style="width: 80%">

                </div>
            </div>




            <div class="form-group">
                <label class="col-lg-2 control-label">活动名称</label>
                <div class="col-lg-10">
                    <input type="text" class="form-control" name="name" id="name" value="" style="width: 80%">

                </div>
            </div>



            <div class="form-group">
                <label class="col-lg-2 control-label">活动介绍</label>
                <div class="col-lg-10">
                    <textarea class="form-control" name="description" id="description"></textarea>
                </div>
            </div>




            <div class="form-group">
                <label class="col-lg-2 control-label">上线时间</label>
                <div class="col-lg-10 col-sm-10">
                    <div class="input-group">
                        <input type="text" class="form-control" id="create_time" name="online_time" value="{$time|date='Y-m-d H:i:s',###}" readonly size="15">
                        <span class="input-group-addon"><i class="fa fa-th"></i></span>
                    </div>
                    <script>
                        $('#create_time').fdatepicker({
                            format: 'yyyy-mm-dd hh:ii:ss',
                            pickTime: true
                        });
                    </script>								<div class="help-block"></div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-2 control-label">下线时间</label>
                <div class="col-lg-10 col-sm-10">
                    <div class="input-group">
                        <input type="text" class="form-control" id="update_time" name="downline_time" value="{$time|date='Y-m-d H:i:s',###}" readonly size="15">
                        <span class="input-group-addon"><i class="fa fa-th"></i></span>
                    </div>
                    <script>
                        $('#update_time').fdatepicker({
                            format: 'yyyy-mm-dd hh:ii:ss',
                            pickTime: true
                        });
                    </script>								<div class="help-block"></div>
                </div>
            </div>




            <div class="form-group">
                <div class="col-lg-offset-2 col-lg-10">
                    <input type="hidden" name="id" value="{$info['id']|default=''}">
                    <button class="btn btn-success submit-btn ajax-post" type="submit" target-form="form-horizontal">确 定</button>
                    <button class="btn btn-danger btn-return" onclick="javascript:history.back(-1);return false;">返 回</button>
                </div>
            </div>
        </form>

    </div>
</div>
{/block}

{block name="script"}
<script type="text/javascript" src="__PUBLIC__/plugs/webuploader/webuploader.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/plugs/webuploader/webuploader.custom.js"></script>
<script type="text/javascript" src="__PUBLIC__/js/droppable.js"></script>
<script type="text/javascript" src="__PUBLIC__/plugs/board/board.min.js"></script>

<script type="text/javascript">
    function check(){
        if(!$("#name").val()){
            alert("活动名称不能为空！");
            return false;
        }
    }

    $(function(){
        $("#type").change(function(){
            var type = $(this).val();
            if(type==1){

                $("#sign_s").css("display","block");
                $("#tuan_s").css("display","none");
                $("#wupin").css("display","none");

                var what = $("input[name='what']:checked").val();

            }else if(type==2){
                $("#sign_s").css("display","none");
                $("#wupin").css("display","none");
                $("#jine").css("display","none");
                $("#tuan_s").css("display","block");

            }else{
                $("#sign_s").css("display","none");
                $("#tuan_s").css("display","none");
                $("#wupin").css("display","block");
                $("#jine").css("display","block");

            }

        });

        $('input[type=radio][name=what]').change(function() {
            if (this.value == 1) {
                $("#wupin").css("display","none");
                $("#jine").css("display","block");
            }

            else if (this.value == 2) {
                $("#wupin").css("display","block");
                $("#jine").css("display","none");
            }
        });

    });

</script>
{/block}